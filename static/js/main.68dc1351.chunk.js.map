{"version":3,"sources":["models/IDice.ts","components/DiceHolder/index.style.ts","components/Dice/index.style.ts","components/Dice/index.tsx","hooks/useInterval.ts","components/DiceHolder/index.tsx","components/DiceContainer/index.style.ts","components/DiceContainer/index.tsx","redux/store/defaultState.ts","redux/reducers/diceReducer.ts","redux/reducers/index.ts","App.tsx","redux/store/index.ts","serviceWorker.ts","index.tsx","models/index.ts"],"names":["EDiceAnimation","StyledDiceHolder","styled","div","StyledDot","props","show","multiplier","StyledDiceRow","StyledDice","diceTemplates","Dice","dice","animate","holderId","useState","animValue","setAnimValue","dispatch","useDispatch","useDrag","item","type","drag","callback","delay","savedCallback","useRef","useEffect","current","id","setInterval","clearInterval","useInterval","Math","floor","random","animation","None","timer","setTimeout","payload","clearTimeout","className","ref","currentValue","DiceHolder","holder","onDrop","useDrop","accept","canDrop","drop","StyledDiceContainer","StyledDiceContainerButtons","StyledDiceContainerWrapper","DiceContainer","diceHolders","useSelector","state","dices","setAnimate","map","dh","index","newHolder","onDiceDrop","key","disabled","onClick","defaultState","animateDices","chips","numeral","diceDropAction","oldHolder","findIndex","Hold","Merge","diceLaunchAction","currentDice","diceAddAction","nextEmptyHolder","Spawn","diceAnimReset","rootReducer","combineReducers","action","App","store","createStore","backend","HTML5Backend","style","position","bottom","left","pkg","version","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.68dc1351.chunk.js","sourcesContent":["export enum EDiceAnimation {\n    Spawn = 'bounceInDown',\n    Merge = 'rubberBand',\n    Hold = 'pulse',\n    None = '',\n}\n\nexport interface IDice {\n    multiplier: 1 | 2 | 4 | 8 | 16 | 32 | 64;\n    currentValue: number;\n    animation: EDiceAnimation;\n}","import styled from \"styled-components\";\n\nexport const StyledDiceHolder = styled.div`\n    width: 100px;\n    height: 100px;\n    border-radius: 12px;\n    background-color: #ecf0f1;\n    box-sizing: border-box;\n    box-shadow: inset 5px 5px 5px 0px rgba(0,0,0,0.25);\n    display: flex;\n    align-items: center;\n`;\n","import styled from \"styled-components\";\nimport { IDice } from \"../../models\";\n\nexport const StyledDot = styled.div<{show: boolean, multiplier: IDice['multiplier']}>`\n    display: flex;\n    align-content: center;\n    opacity: ${props => props.show ? 1 : 0};\n    width: 20px;\n    height: 20px;\n    background-color: ${props => {\n        switch(props.multiplier) {\n            case 1:\n                return '#2c3e50';\n            case 2:\n                return '#2980b9';\n            case 4:\n                return '#27ae60';\n            case 8:\n                return '#8e44ad';\n            case 16:\n                return '#d35400';\n            case 32:\n                return '#c0392b';\n            case 64:\n                return 'white';\n            default:\n                return 'none';\n        };\n    }};\n    border-radius: 100%;\n`;\n\nexport const StyledDiceRow = styled.div<{multiplier: IDice['multiplier']}>`\n    display: flex;\n    flex-direction: row;\n    align-items: stretch;\n    flex: 1;\n\n    > div {\n        display: flex;\n        flex: 1;\n        align-items: center;\n        justify-content: space-around;\n    }\n`;\n\nexport const StyledDice = styled.div<{multiplier: IDice['multiplier']}>`\n    height: 100px;\n    width: 100px;\n    display: flex;\n    flex-direction: column;\n    align-items: stretch;\n    background-color: ${props => {\n        switch(props.multiplier) {\n            case 1:\n                return '#ecf0f1';\n            case 2:\n                return '#3498db';\n            case 4:\n                return '#2ecc71';\n            case 8:\n                return '#9b59b6';\n            case 16:\n                return '#e67e22';\n            case 32:\n                return '#e74c3c';\n            default:\n                return 'none';\n        }\n    }};\n    background-image: ${props => \n        props.multiplier === 64 \n        ? 'linear-gradient(to bottom right, #b827fc 0%, #2c90fc 25%, #b8fd33 50%, #fec837 75%, #fd1892 100%)'\n        : 'none'\n    };\n    border-image-slice: 1;\n    border-radius: 12px;\n    padding: 12px;\n    box-sizing: border-box;\n`;","import { IDice, EDiceAnimation } from \"../../models\";\nimport React, { FC, useState, useEffect } from \"react\";\nimport { StyledDice, StyledDiceRow, StyledDot } from \"./index.style\";\nimport { useInterval } from \"../../hooks/useInterval\";\nimport { useDrag } from 'react-dnd';\nimport { useDispatch } from \"react-redux\";\nimport { IDiceAction } from \"../../redux/reducers/diceReducer\";\n\ninterface IDiceProps {\n    dice: IDice;\n    holderId: number;\n    animate: boolean;\n}\n\nconst diceTemplates = [\n    [\n        [0, 0, 0],\n        [0, 1, 0],\n        [0, 0, 0],\n    ],\n    [\n        [0, 0, 1],\n        [0, 0, 0],\n        [1, 0, 0],\n    ],\n    [\n        [0, 0, 1],\n        [0, 1, 0],\n        [1, 0, 0],\n    ],\n    [\n        [1, 0, 1],\n        [0, 0, 0],\n        [1, 0, 1],\n    ],\n    [\n        [1, 0, 1],\n        [0, 1, 0],\n        [1, 0, 1],\n    ],\n    [\n        [1, 0, 1],\n        [1, 0, 1],\n        [1, 0, 1],\n    ],\n]\n\nexport const Dice: FC<IDiceProps> = ({ dice, animate, holderId }) => {\n    const [animValue, setAnimValue] = useState<number>(1);\n    const dispatch = useDispatch();\n\n    const [,drag] = useDrag({\n        item: { type: 'DICE', dice },\n    });\n    \n    useInterval(() => {\n        setAnimValue(Math.floor((Math.random() * 6) + 1));\n    }, animate ? 50 : null);\n\n    useEffect(() => {\n        if (dice.animation === EDiceAnimation.None) return;\n\n        const timer = setTimeout(() => {\n            dispatch<IDiceAction>({\n                type: 'DICE_ANIM_RESET',\n                payload: {\n                    holderId,\n                }\n            })\n        }, 600);\n\n        return () => clearTimeout(timer);\n    }, [dice.animation, dispatch, holderId])\n\n    return (\n        <StyledDice className={`animated ${dice.animation} faster`} ref={drag} multiplier={dice.multiplier}>\n            <StyledDiceRow multiplier={dice.multiplier}>\n                <div>\n                    <StyledDot show={diceTemplates[(animate ? animValue : dice.currentValue) - 1][0][0] === 1} multiplier={dice.multiplier}/>\n                    <StyledDot show={diceTemplates[(animate ? animValue : dice.currentValue) - 1][0][1] === 1} multiplier={dice.multiplier}/>\n                    <StyledDot show={diceTemplates[(animate ? animValue : dice.currentValue) - 1][0][2] === 1} multiplier={dice.multiplier}/>\n                </div>\n            </StyledDiceRow>\n            <StyledDiceRow multiplier={dice.multiplier}>\n                <div>\n                    <StyledDot show={diceTemplates[(animate ? animValue : dice.currentValue) - 1][1][0] === 1} multiplier={dice.multiplier}/>\n                    <StyledDot show={diceTemplates[(animate ? animValue : dice.currentValue) - 1][1][1] === 1} multiplier={dice.multiplier}/>\n                    <StyledDot show={diceTemplates[(animate ? animValue : dice.currentValue) - 1][1][2] === 1} multiplier={dice.multiplier}/>\n                </div>\n            </StyledDiceRow>\n            <StyledDiceRow multiplier={dice.multiplier}>\n                <div>\n                    <StyledDot show={diceTemplates[(animate ? animValue : dice.currentValue) - 1][2][0] === 1} multiplier={dice.multiplier}/>\n                    <StyledDot show={diceTemplates[(animate ? animValue : dice.currentValue) - 1][2][1] === 1} multiplier={dice.multiplier}/>\n                    <StyledDot show={diceTemplates[(animate ? animValue : dice.currentValue) - 1][2][2] === 1} multiplier={dice.multiplier}/>\n                </div>\n            </StyledDiceRow>\n        </StyledDice>\n    )\n}","import { useRef, useEffect } from \"react\";\n\nexport const useInterval = (callback: () => void, delay: number | null) => {\n    const savedCallback = useRef<() => void>();\n\n    useEffect(() => {\n        savedCallback.current = callback;\n    }, [callback]);\n\n    useEffect(() => {\n        const tick = () => {\n            savedCallback.current && savedCallback.current();\n        }\n        \n        if (delay !== null) {\n            let id = setInterval(tick, delay);\n            return () => clearInterval(id);\n        }\n\n    }, [delay]);\n}","import React, { FC } from \"react\";\nimport { StyledDiceHolder } from \"./index.style\";\nimport { IDice, IDiceHolder } from \"../../models\";\nimport { Dice } from \"../Dice\";\nimport { useDrop, DragObjectWithType } from \"react-dnd\";\n\ninterface IDiceHolderProps {\n    holderId: number;\n    holder: IDiceHolder;\n    animate: boolean;\n    onDrop: (item: DragObjectWithType & { dice: IDice }) => void;\n}\n\nexport const DiceHolder: FC<IDiceHolderProps> = ({ holder, animate, onDrop, holderId }) => {\n\n    const [,drop] = useDrop<DragObjectWithType & { dice: IDice }, void, any>({\n        accept: 'DICE',\n        canDrop: (item) => (\n            !holder.dice \n            || (\n                holder.dice.currentValue === item.dice.currentValue \n                && holder.dice.multiplier === item.dice.multiplier\n                && item.dice.multiplier < 64\n            )\n        ),\n        drop: (item) => {\n            onDrop(item);\n        }\n    });\n\n    return (\n        <StyledDiceHolder className={animate && holder.dice ? 'animated tada' : ''} ref={drop}>\n            {\n                holder.dice ? (\n                    <Dice holderId={holderId} dice={holder.dice} animate={animate} />\n                ) : ''\n            }\n        </StyledDiceHolder>\n    )\n};","import styled from \"styled-components\";\nimport { StyledDiceHolder } from \"../DiceHolder/index.style\";\n\nexport const StyledDiceContainer = styled.div`\n    display: flex;\n    flex-wrap: wrap;\n    max-width: 632px;\n    padding: 15px;\n    background-color: #1abc9c;\n    box-sizing: border-box;\n    border-radius: 12px 12px 0 0;\n\n    ${StyledDiceHolder} {\n        margin: 10px;\n    }\n`;\n\nexport const StyledDiceContainerButtons = styled.div`\n    display: flex;\n    height: 50px;\n    max-width: 632px;\n\n    button {\n        border: none;\n        background-color: #34495e;\n        color: white;\n        font-size: 18px;\n        height: 100%;\n        width: 50%;\n\n        transition: background-color 0.3s ease;\n        \n        &:disabled {\n            background-color: #7f8c8d;\n        }\n\n        &:hover:not(:disabled) {\n            background-color: #2c3e50;\n        }\n\n        &:first-child {\n            border-right: solid 1px white;\n            border-radius: 0 0 0 12px;\n        }\n\n        &:last-child {\n            border-radius: 0 0 12px 0;\n        }\n    }\n`;\n\nexport const StyledDiceContainerWrapper = styled.div`\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100vh;\n`;","import React, { FC, useState } from 'react';\nimport { IState, IDiceHolder, IDice } from '../../models';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { DiceHolder } from '../DiceHolder';\nimport { IDiceAction } from '../../redux/reducers/diceReducer';\nimport { StyledDiceContainer, StyledDiceContainerButtons, StyledDiceContainerWrapper } from './index.style';\nimport { DragObjectWithType } from 'react-dnd';\n\nexport const DiceContainer: FC = () => {\n    const diceHolders = useSelector<IState, IDiceHolder[]>(state => state.dices.diceHolders);\n    const [animate, setAnimate] = useState<boolean>(false);\n    const dispatch = useDispatch();\n\n    const animateDice = () => {\n        setAnimate(true);\n        setTimeout(() => {\n            setAnimate(false);\n            dispatch<IDiceAction>({\n                type: 'DICE_LAUNCH'\n            });\n        }, 1001);\n    }\n\n    const addDice = () => {\n        dispatch<IDiceAction>({\n            type: 'DICE_ADD'\n        });\n    }\n\n    const onDiceDrop = (item: DragObjectWithType & { dice: IDice }, holderId: number) => {\n        dispatch<IDiceAction>({ \n            type: 'DICE_DROP', \n            payload: {\n                newHolder: holderId,\n                dice: item.dice,\n            }\n        });\n    }\n\n    return (\n        <StyledDiceContainerWrapper>\n            <div>\n                <StyledDiceContainer>\n                    {\n                        diceHolders.map((dh, index) => (\n                            <DiceHolder \n                                holderId={index}\n                                onDrop={item => onDiceDrop(item, index)}\n                                key={index}\n                                animate={animate}\n                                holder={dh}\n                            />\n                        ))\n                    }\n                </StyledDiceContainer>\n                <StyledDiceContainerButtons>\n                    <button disabled={animate} onClick={animateDice}>Launch dices</button>\n                    <button disabled={animate} onClick={addDice}>Add dice</button>\n                </StyledDiceContainerButtons>\n            </div>\n        </StyledDiceContainerWrapper>\n    );\n}","import { IState, EDiceAnimation } from \"../../models\";\nimport numeral from 'numeral';\n\nexport const defaultState: IState = {\n    dices: {\n        animateDices: false,\n        diceHolders: [\n            {\n                dice: {\n                    currentValue: 3,\n                    multiplier: 1,\n                    animation: EDiceAnimation.None,\n                }\n            },\n            {\n                dice: null,\n            },\n            {\n                dice: null,\n            },\n            {\n                dice: null,\n            },\n            {\n                dice: null,\n            },\n            {\n                dice: null,\n            },\n            {\n                dice: null,\n            },\n            {\n                dice: null,\n            },\n            {\n                dice: null,\n            },\n            {\n                dice: null,\n            },\n            {\n                dice: null,\n            },\n            {\n                dice: null,\n            },\n            {\n                dice: null,\n            },\n            {\n                dice: null,\n            },\n            {\n                dice: null,\n            },\n        ],\n        chips: numeral(0),\n    }\n}","import { IState, IDice, IDiceHolder, EDiceAnimation } from '../../models'\nimport { defaultState } from '../store/defaultState'\n\nexport type IDiceDropPayload = { newHolder: number; dice: IDice };\nexport type IDiceAnimResetPayload = { holderId: number };\n\nexport interface IDiceAction {\n    type: 'DICE_DROP' \n            | 'DICE_LAUNCH'\n            | 'DICE_ADD'\n            | 'DICE_ANIM_RESET';\n    payload?:\n        IDiceDropPayload\n            | IDiceAnimResetPayload\n            | undefined;\n}\n\nconst diceDropAction = (state: IState['dices'], payload: IDiceDropPayload) => {\n    const { newHolder, dice } = payload;\n    const diceHolders = [...state.diceHolders];\n    const oldHolder = state.diceHolders.findIndex(dh => dh.dice === dice);\n\n    if (oldHolder === -1)\n        return { ...state };\n    \n    diceHolders[oldHolder].dice = null;\n\n    if (!diceHolders[newHolder].dice)\n        dice.animation = EDiceAnimation.Hold;\n\n    if (diceHolders[newHolder].dice) {\n        dice.multiplier *= 2;\n        dice.animation = EDiceAnimation.Merge;\n    }\n\n    diceHolders[newHolder].dice = {...dice};\n\n    return { ...state, diceHolders };\n}\n\nconst diceLaunchAction = (state: IState['dices']) => {\n    const diceHolders = state.diceHolders.map((dh: IDiceHolder) => {\n        if (dh.dice) {\n            const currentDice = {...dh.dice};\n            return {...dh, dice: { ...currentDice, currentValue: Math.floor(Math.random() * 6) + 1 }};\n        }\n\n        return {...dh};\n    });\n\n    return { ...state, diceHolders };\n}\n\nconst diceAddAction = (state: IState['dices']) => {\n    const diceHolders = [...state.diceHolders];\n    const nextEmptyHolder = diceHolders.findIndex(dh => !dh.dice);\n\n    if (nextEmptyHolder === -1)\n        return { ...state };\n    \n    diceHolders[nextEmptyHolder].dice = {\n        currentValue: Math.floor(Math.random() * 6) + 1,\n        multiplier: 1,\n        animation: EDiceAnimation.Spawn,\n    };\n\n    return { ...state, diceHolders };\n}\n\nconst diceAnimReset = (state: IState['dices'], { holderId }: IDiceAnimResetPayload) => {\n    const diceHolders = [...state.diceHolders];\n    const dice = { ...diceHolders[holderId].dice, animation: EDiceAnimation.None } as IDice;\n\n    diceHolders[holderId] = { ...diceHolders[holderId], dice };\n\n    return { ...state, diceHolders };\n}\n\nexport const diceReducer = (state: IState['dices'] = defaultState.dices, action: IDiceAction) => {\n    switch (action.type) {\n        case 'DICE_DROP':\n            return diceDropAction(state, action.payload as IDiceDropPayload);\n        case 'DICE_LAUNCH':\n            return diceLaunchAction(state);\n        case 'DICE_ADD':\n            return diceAddAction(state);\n        case 'DICE_ANIM_RESET':\n            return diceAnimReset(state, action.payload as IDiceAnimResetPayload);\n        default:\n            return {...state};\n    }\n}","import { combineReducers } from \"redux\";\nimport { diceReducer } from './diceReducer';\n\nexport const rootReducer = combineReducers({ dices: diceReducer });","import React from 'react';\nimport { DiceContainer } from './components/DiceContainer';\nimport { Provider } from 'react-redux';\nimport { createMyStore } from './redux/store';\nimport { DndProvider } from 'react-dnd';\nimport HTML5Backend from 'react-dnd-html5-backend';\n\nimport './animate.css';\nimport './reset.css';\n\nimport pkg from '../package.json';\n\nconst App: React.FC = () => {\n  return (\n    <Provider store={createMyStore()}>\n      <DndProvider backend={HTML5Backend}>\n        <DiceContainer/>\n        <div style={{ position: \"absolute\", bottom: \"0\", left: \"0\" }}>Dice Merge v{pkg.version} - Made by Kaoff</div>\n      </DndProvider>\n    </Provider>\n  );\n}\n\nexport default App;\n","import { rootReducer } from \"../reducers\"\nimport { createStore } from \"redux\"\nimport { defaultState } from \"./defaultState\";\n\nexport const createMyStore = () => createStore(rootReducer, defaultState);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","export * from './IDice';\nexport * from './IState';\nexport * from './IDiceHolder';"],"sourceRoot":""}